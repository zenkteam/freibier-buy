(this["webpackJsonpfreibier-buy"]=this["webpackJsonpfreibier-buy"]||[]).push([[0],{136:function(e,t){},201:function(e,t){},203:function(e,t){},267:function(e,t){},269:function(e,t){},309:function(e,t){},310:function(e,t){},315:function(e,t){},317:function(e,t){},324:function(e,t){},343:function(e,t){},379:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),r=a(82),s=a.n(r),i=a(0),o=a.n(i),l=a(13),d=a(6),u=a(37),b=a(3),p=a(185),m=a(17),f=a(187),j=a(189),h={network:m.p.MAINNET,rpcUrl:"",defaultTezPrice:{last_updated_at:1621264908,usd:5.24,usd_24h_change:-10.701803732742505,usd_24h_vol:410319278.74019855,usd_market_cap:4367588701.058423},defaultTokenPrice:{last_updated_at:1621264908,usd:0,usd_24h_change:0,usd_24h_vol:0,usd_market_cap:0},storageLimitSurcharge:1.2,lpTokenDecimals:1e6};switch(h.network){case m.p.MAINNET:h.rpcUrl="https://rpc.tzbeta.net/";break;case m.p.FLORENCENET:h.rpcUrl="https://rpc.florence.tzstats.com/";break;case m.p.CUSTOM:h.rpcUrl="http://localhost:8732/"}var v=h,x={trackEvent:function(e,t){var a=window.gtag;a&&a(e,t)}},O=a(1),g=function(e){var t=e.Tezos,a=e.setWallet,c=e.setUserAddress,r=e.setBeaconConnection,s=e.setPublicToken,i=e.wallet,u=e.showNano,h=void 0===u||u,g=Object(n.useState)(!1),w=Object(d.a)(g,2),y=w[0],k=w[1],N=Object(n.useState)(!1),S=Object(d.a)(N,2),_=S[0],D=S[1],C=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),x.trackEvent("connect_start",{type:"wallet"}),e.next=5,i.requestPermissions({network:{type:v.network,rpcUrl:v.rpcUrl}});case 5:return e.next=7,i.getPKH();case 7:return a=e.sent,e.next=10,C(a);case 10:r&&r(!0),t.setWalletProvider(i),x.trackEvent("connect_success",{type:"wallet"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),k(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(!0),x.trackEvent("connect_start",{type:"nano"}),e.next=5,f.a.create();case 5:return a=e.sent,n=new j.a(a,"44'/1729'/0'/0'",!0),t.setSignerProvider(n),e.next=10,t.signer.publicKeyHash();case 10:return c=e.sent,e.next=13,C(c);case 13:x.trackEvent("connect_success",{type:"nano"}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error!",e.t0),D(!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new p.a({name:"Widget",preferredNetwork:v.network,disableDefaultEvents:!0,eventHandlers:(n={},Object(b.a)(n,m.e.PAIR_INIT,{handler:m.K.PAIR_INIT}),Object(b.a)(n,m.e.PAIR_SUCCESS,{handler:function(e){s&&s(e.publicKey)}}),n)}),t.setWalletProvider(c),a(c),e.next=5,c.client.getActiveAccount();case 5:if(!e.sent){e.next=13;break}return e.next=9,c.getPKH();case 9:return i=e.sent,e.next=12,C(i);case 12:r&&r(!0);case 13:case"end":return e.stop()}}),e)})))()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"button long-submit-button bg-primary-4 w-button",id:"connectWallet",style:{width:"100%"},onClick:P,children:y?Object(O.jsx)("span",{children:"Confirm Connection"}):Object(O.jsx)("span",{children:"Connect Wallet"})}),h&&Object(O.jsx)("button",{className:"button long-submit-button w-button secondary",id:"connectWallet",disabled:_,onClick:F,children:_?Object(O.jsx)("span",{children:"Loading, please wait"}):Object(O.jsx)("span",{children:"Connect Ledger Nano"})})]})},w=function(e){var t=e.wallet,a=e.setPublicToken,n=e.setUserAddress,c=e.setWallet,r=e.setTezos,s=e.setBeaconConnection,i=function(){var e=Object(l.a)(o.a.mark((function e(){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(""),c(null),i=new u.a(v.rpcUrl),r(i),s&&s(!1),a&&a(null),!t){e.next=13;break}return e.next=9,t.client.removeAllAccounts();case 9:return e.next=11,t.client.removeAllPeers();case 11:return e.next=13,t.client.destroy();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("button",{className:"button long-submit-button w-button secondary",id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",onClick:i,children:"Disconnect wallet"})},y=(a(81),a(58)),k=function(e,t){var a=document.getElementsByClassName(e);if(a.length){var n,c=Object(y.a)(a);try{for(c.s();!(n=c.n()).done;){n.value.innerHTML=t}}catch(r){c.e(r)}finally{c.f()}}},N=function(e,t){var a=new CustomEvent(e,{bubbles:!0,detail:t});document.dispatchEvent(a)},S={userTokenBalance:function(e,t){var a=e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+" "+t;k("user-token-balance",a),N("user-token-balance",e)},userBalance:function(e){var t=e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})+" \ua729";k("user-balance",t),N("user-balance",e)},tokenPriceChange:function(e){var t=e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+"%";k("price-change-24h",t),N("price-change-24h",e)},pricePerTez:function(e){var t=e.toLocaleString(void 0,{minimumFractionDigits:2,minimumSignificantDigits:1,maximumSignificantDigits:2})+" \ua729";k("price-per-tez",t),N("price-per-tez",e)},pricePerUsd:function(e){var t="$"+e.toLocaleString(void 0,{minimumFractionDigits:2,minimumSignificantDigits:1,maximumSignificantDigits:3});k("price-per-usd",t),N("price-per-usd",e)}},_=function(e){var t=e.contract,a=e.tokenDetails,c=e.updateUserBalance,r=e.updateUserTokenBalance,s=(e.Tezos,e.userAddress),i=e.userBalance,u=e.setStorage,p=e.storage,m=Object(n.useState)(v.defaultTezPrice),f=Object(d.a)(m,2),j=f[0],h=f[1],g=Object(n.useState)(v.defaultTokenPrice),w=Object(d.a)(g,2),y=w[0],k=w[1],N=Object(n.useState)(0),_=Object(d.a)(N,2),D=_[0],C=_[1],P=Object(n.useState)(0),F=Object(d.a)(P,2),T=F[0],z=F[1],A=Object(n.useState)(0),U=Object(d.a)(A,2),B=U[0],E=U[1],I=Object(n.useState)(0),L=Object(d.a)(I,2),M=L[0],R=L[1],W=Object(n.useState)(0),Z=Object(d.a)(W,2),$=Z[0],V=Z[1],q=Object(n.useState)(0),H=Object(d.a)(q,2),G=H[0],X=H[1],Y=Object(n.useState)(0),K=Object(d.a)(Y,2),Q=K[0],J=K[1],ee=Object(n.useState)(!1),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!1),re=Object(d.a)(ce,2),se=re[0],ie=re[1],oe=Math.pow(10,6),le=Math.pow(10,(null===a||void 0===a?void 0:a.decimals)||6);function de(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function ue(e){var t=de(.997*e*B/(T+.997*e),2);R(e),V(de(e*j.usd,2)),X(t),J(t*y.usd)}function be(e){!function(e){e=de(e,2);var t=de(e/j.usd,2),a=de(.997*t*B/(T+.997*t),2);R(t),V(e),X(a),J(a*y.usd)}(Math.abs(parseFloat(e.target.value))||0)}function pe(e){!function(e){var t=de(1.003*e*T/(B-1.003*e),2);t<0&&(t=0);R(t),V(t*j.usd),X(e),J(e*y.usd)}(Math.abs(parseFloat(e.target.value))||0)}Object(n.useEffect)((function(){fetch("https://api.coingecko.com/api/v3/simple/price?ids=tezos&vs_currencies=usd&include_market_cap=true&include_24hr_vol=true&include_24hr_change=true&include_last_updated_at=true").then((function(e){return e.json()})).then((function(e){return h(e.tezos)}))}),[]),Object(n.useEffect)((function(){p&&(z(p.storage.tez_pool.toNumber()/oe),E(p.storage.token_pool.toNumber()/le))}),[p,oe,le]),Object(n.useEffect)((function(){if(a){var e=new Date;e.setDate(e.getDate()-1);var t=e.toISOString();fetch("https://api.tzkt.io/v1/contracts/".concat(a.swapContract,"/storage/history?limit=").concat(700)).then((function(e){return e.json()})).then((function(e){return e.find((function(e){return e.timestamp<t}))})).then((function(e){if(e&&e.value){var t=parseFloat(e.value.storage.tez_pool)/oe,a=parseFloat(e.value.storage.token_pool)/le;C(t/a)}}))}}),[a,oe,le]),Object(n.useEffect)((function(){if(D){var e=y;e.usd_24h_change=100*(e.usd/(D*j.usd)-1),k(e),S.tokenPriceChange(e.usd_24h_change)}}),[y,y.usd,D,j.usd]),Object(n.useEffect)((function(){if(T&&B){var e=y;e.usd=T/B*j.usd,k(e),S.pricePerTez(T/B),S.pricePerUsd(e.usd)}}),[T,B,j,y]),Object(n.useEffect)((function(){T&&B&&ue(1)}),[T,B]);var me=function(){var e=Object(l.a)(o.a.mark((function e(){var n,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),x.trackEvent("swap_start",Object(b.a)({XTZ:M},a.symbol,G)),e.prev=2,n=Math.round(G*le*.995),e.next=6,t.methods.tezToTokenPayment(n,s).send({storageLimit:0,amount:M*oe,mutez:!0});case 6:return i=e.sent,e.next=9,i.confirmation();case 9:return e.next=11,t.storage();case 11:(l=e.sent)&&u(l),c(),r(),x.trackEvent("swap_success",Object(b.a)({XTZ:M},a.symbol,n)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0);case 21:return e.prev=21,ne(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{id:"form-input-1",className:"div-block-11 w-node-_15a9de31-66d8-0b4b-3b7b-19a314a9d93b-43c4b6f7",children:[!se&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"number",className:"form-input form-input-large currency w-input",name:"Input-Currency","data-name":"Input Currency",placeholder:"0.00",id:"Input-Currency",step:"1",style:{paddingRight:60},value:M||"",onChange:function(e){return t=e,void ue(Math.abs(parseFloat(t.target.value))||0);var t},required:!0}),Object(O.jsxs)("div",{className:"text-currency",style:{overflow:"hidden",textOverflow:"ellipsis",width:168},children:["~$",$.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),se&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:"dollar-sign",style:{position:"absolute",left:18,top:10,color:"#141414"},children:"$"}),Object(O.jsx)("input",{type:"number",className:"form-input form-input-large currency w-input",name:"Input-Currency","data-name":"Input Currency",placeholder:"0.00",id:"Input-Currency",step:"1",style:{paddingRight:60,paddingLeft:30},value:$||"",onChange:function(e){return be(e)},required:!0}),Object(O.jsxs)("div",{className:"text-currency",style:{overflow:"hidden",textOverflow:"ellipsis",width:168},children:["~",M.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," \ua729"]})]}),Object(O.jsx)("button",{className:"link-block",style:{backgroundColor:se?"rgba(20,20,20,.5)":"",color:se?"white":"",textAlign:"center"},onClick:function(){return ie(!se)},children:"$"}),Object(O.jsx)("div",{className:"div-block-12",children:Object(O.jsx)("div",{className:"image-8",children:Object(O.jsx)("img",{loading:"lazy",alt:"",className:"image-9",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6091079111aa5a643419586e_icon-arrow-down.svg"})})})]}),Object(O.jsx)("div",{id:"form-price-1",className:"div-block-8 w-node-_15a9de31-66d8-0b4b-3b7b-19a314a9d940-43c4b6f7",children:Object(O.jsxs)("div",{className:"div-block-9",children:[Object(O.jsx)("div",{className:"div-block-10",children:Object(O.jsx)("img",{loading:"lazy",alt:"",className:"token-img",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/609bdfbc8ef4b38115354a8e_2011.png"})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"small-text exception-buying",children:["Tezos ",Object(O.jsx)("span",{className:"inline-badge-medium",children:"XTZ"})]}),Object(O.jsxs)("div",{className:"small-text crypto-price",children:["~$",j.usd.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"\xa0",j.usd_24h_change<0&&Object(O.jsxs)("span",{className:"inline-badge-medium red",children:["\u2193 ",j.usd_24h_change.toLocaleString(void 0,{maximumFractionDigits:2}),"%"]}),j.usd_24h_change>0&&Object(O.jsxs)("span",{className:"inline-badge-medium green",children:["\u2191 ",j.usd_24h_change.toLocaleString(void 0,{maximumFractionDigits:2}),"%"]})]})]}),i>0&&Object(O.jsx)("div",{onClick:function(){ue(i)},style:{background:"#ebebec",color:"rgba(20,20,20,.5)",borderRadius:4,padding:"6px 6px 4px 6px",marginLeft:"auto",fontSize:10,lineHeight:1,cursor:"pointer"},children:"MAX"})]})}),Object(O.jsxs)("div",{id:"form-input-2",className:"div-block-11 w-node-dfb2f49c-1a5d-d200-b5d5-9b7a746613e7-43c4b6f7",children:[Object(O.jsx)("input",{type:"number",className:"form-input form-input-large currency w-input",name:"Output-Currency","data-name":"Output Currency",placeholder:"0.00",id:"Output-Currency",step:"10000",style:{paddingRight:12},value:G||"",onChange:function(e){return pe(e)},required:!0}),Object(O.jsxs)("div",{className:"text-currency",style:{overflow:"hidden",textOverflow:"ellipsis",width:216},children:["~$",Q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),Object(O.jsx)("div",{id:"form-price-2",className:"div-block-8 w-node-_15a9de31-66d8-0b4b-3b7b-19a314a9d949-43c4b6f7",children:Object(O.jsxs)("div",{className:"div-block-9",children:[Object(O.jsx)("div",{className:"div-block-10",children:Object(O.jsx)("img",{loading:"lazy",alt:"",className:"token-img",src:null===a||void 0===a?void 0:a.thumbnailUri})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"small-text exception-buying",children:[null===a||void 0===a?void 0:a.name," ",Object(O.jsx)("span",{className:"inline-badge-medium",children:null===a||void 0===a?void 0:a.symbol})]}),Object(O.jsxs)("div",{className:"small-text crypto-price",children:["~$",y.usd.toLocaleString(void 0,{minimumFractionDigits:2,minimumSignificantDigits:1,maximumSignificantDigits:3}),0!==j.usd_24h_change&&(y.usd_24h_change>0||y.usd_24h_change>j.usd_24h_change)&&Object(O.jsxs)(O.Fragment,{children:["\xa0",y.usd_24h_change<0&&Object(O.jsxs)("span",{className:"inline-badge-medium red",children:["\u2193 ",y.usd_24h_change.toLocaleString(void 0,{maximumFractionDigits:2}),"%"]}),y.usd_24h_change>0&&Object(O.jsxs)("span",{className:"inline-badge-medium green",children:["\u2191 ",y.usd_24h_change.toLocaleString(void 0,{maximumFractionDigits:2}),"%"]})]})]})]})]})}),s?ae?Object(O.jsx)("input",{type:"submit",value:"Please confirm the transaction",onClick:me,id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",className:"button long-submit-button bg-primary-4 w-button"}):T?M>i?Object(O.jsx)("input",{type:"submit",value:"Not enough funds",id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",className:"button long-submit-button bg-primary-4 w-button",disabled:!0,style:{backgroundColor:"#ebebec"}}):M&&G?Object(O.jsx)("input",{type:"submit",value:"Buy "+(null===a||void 0===a?void 0:a.symbol),onClick:me,id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",className:"button long-submit-button bg-primary-4 w-button"}):Object(O.jsx)("input",{type:"submit",value:"Buy "+(null===a||void 0===a?void 0:a.symbol),id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",className:"button long-submit-button bg-primary-4 w-button",disabled:!0,style:{backgroundColor:"#ebebec"}}):Object(O.jsx)("button",{id:"w-node-cac1c974-81c3-bb3d-28aa-2c88c2fd1725-856d06c6",className:"button long-submit-button w-button",children:"Loading exchange rate"}):Object(O.jsx)(O.Fragment,{})]})},D=a(12),C=function(e){var t=e.data,a=e.height,n=e.width,r=e.horizontalGuides,s=e.verticalGuides,i=e.precision,o=n/50,l=Math.max.apply(Math,Object(D.a)(t.map((function(e){return e.x})))),d=Math.max.apply(Math,Object(D.a)(t.map((function(e){return e.y})))),u=parseFloat(d.toString()).toFixed(i).length+1,b=3*(o+1.4*u+3),p=n-2*b,m=a-2*b,f=t.map((function(e){var t=e.x/l*p+b,a=m-e.y/d*m+b;return"".concat(t,",").concat(a)})).join(" "),j=function(e){var t=e.points;return Object(O.jsx)("polyline",{fill:"none",stroke:"#ccc",strokeWidth:".5",points:t})},h=function(){return Object(O.jsx)(j,{points:"".concat(b,",").concat(a-b," ").concat(n-b,",").concat(a-b)})},v=function(){return Object(O.jsx)(j,{points:"".concat(b,",").concat(b," ").concat(b,",").concat(a-b)})};return Object(O.jsxs)("svg",{viewBox:"0 0 ".concat(n," ").concat(a),height:"100%",width:"100%",children:[Object(O.jsx)(h,{}),function(){var e=a-b+2*o;return t.filter((function(e){return e.label})).map((function(t,a){var n=t.x/l*p+b-o/2;return Object(O.jsx)("text",{x:n,y:e,style:{fill:"#808080",fontSize:o,fontFamily:"Helvetica"},children:t.label},a)}))}(),Object(O.jsx)(v,{}),function(){var e=r;return new Array(e+1).fill(0).map((function(t,a){var n=o,c=m-m*(a/r)+b+o/2;return Object(O.jsxs)("text",{x:n,y:c,style:{fill:"#808080",fontSize:o,fontFamily:"Helvetica"},children:[(d*(a/e)).toFixed(i)," \ua729"]},a)}))}(),s&&function(){var e=s||t.length-1,r=b,i=a-b;return new Array(e).fill(0).map((function(t,a){var s=b+(a+1)/e*(n-2*b);return Object(O.jsx)(c.a.Fragment,{children:Object(O.jsx)("polyline",{fill:"none",stroke:"#ccc",strokeWidth:".5",points:"".concat(s,",").concat(r," ").concat(s,",").concat(i)})},a)}))}(),function(){var e=b,t=n-b;return new Array(r).fill(0).map((function(a,n){var s=m-m*((n+1)/r)+b;return Object(O.jsx)(c.a.Fragment,{children:Object(O.jsx)("polyline",{fill:"none",stroke:"#ccc",strokeWidth:".5",points:"".concat(e,",").concat(s," ").concat(t,",").concat(s)})},n)}))}(),Object(O.jsx)("polyline",{fill:"none",className:"graphLine",stroke:"#392396",strokeWidth:1,points:f})]})};C.defaultProps={height:200,width:500,horizontalGuides:4,verticalGuides:null,precision:2};var P=C;var F=function(e){var t=e.swapContract,a=e.tokenDecimals,c=void 0===a?8:a,r=Object(n.useState)([]),s=Object(d.a)(r,2),i=s[0],o=s[1];Object(n.useEffect)((function(){fetch("https://api.tzkt.io/v1/contracts/".concat(t,"/storage/history?limit=").concat(700)).then((function(e){return e.json()})).then((function(e){return function(e,t){return e.map((function(e){var a=parseFloat(e.value.storage.tez_pool)/Math.pow(10,6),n=parseFloat(e.value.storage.token_pool)/Math.pow(10,t);return{tez_pool:a,token_pool:n,rate:a/n,timestamp:e.timestamp}}))}(e,c)})).then((function(e){return e.reverse()})).then((function(e){return e.map((function(e,t){return{label:t%124===0?e.timestamp.substr(5,5):"",x:t,y:e.rate}}))})).then((function(e){return o(e)}))}),[t,c]);var l=i.length?i[i.length-1].y.toLocaleString(void 0,{minimumFractionDigits:2,minimumSignificantDigits:1,maximumSignificantDigits:2}).length-2:5;return Object(O.jsx)(O.Fragment,{children:i.length&&Object(O.jsx)(P,{width:600,height:300,data:i,horizontalGuides:5,precision:l,verticalGuides:1})})},T=a(8),z=function(e){var t=e.swapContract,a=Object(n.useState)(new u.a(v.rpcUrl)),c=Object(d.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(void 0),b=Object(d.a)(i,2),p=b[0],m=b[1],f=Object(n.useState)(""),j=Object(d.a)(f,2),h=(j[0],j[1]),x=Object(n.useState)(null),y=Object(d.a)(x,2),k=y[0],N=y[1],D=Object(n.useState)(""),C=Object(d.a)(D,2),P=C[0],z=C[1],A=Object(n.useState)(-1),U=Object(d.a)(A,2),B=U[0],E=U[1],I=Object(n.useState)(-1),L=Object(d.a)(I,2),M=L[0],R=L[1],W=Object(n.useState)(),Z=Object(d.a)(W,2),$=Z[0],V=Z[1],q=Object(n.useState)(!1),H=Object(d.a)(q,2),G=(H[0],H[1],Object(n.useState)(!1)),X=Object(d.a)(G,2),Y=(X[0],X[1]),K=Object(n.useState)(!1),Q=Object(d.a)(K,2),J=Q[0],ee=Q[1],te=Object(n.useState)(!1),ae=Object(d.a)(te,2),ne=ae[0],ce=ae[1],re=Object(n.useState)(),se=Object(d.a)(re,2),ie=se[0],oe=se[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.wallet.at(t);case 2:return n=e.sent,e.next=5,n.storage();case 5:c=e.sent,m(n),V(c),a(c.storage.token_address);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){return n.apply(this,arguments)}function n(){return(n=Object(l.a)(o.a.mark((function e(a){var n,c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.wallet.at(a);case 3:return n=e.sent,e.next=6,n.storage();case 6:return c=e.sent,e.next=9,c.assets.token_metadata.get(0);case 9:s=e.sent,i={totalSupply:parseInt(c.assets.total_supply),name:Object(T.e)(s.token_info.get("name")),symbol:Object(T.e)(s.token_info.get("symbol")),description:Object(T.e)(s.token_info.get("description")),thumbnailUri:Object(T.e)(s.token_info.get("thumbnailUri")),decimals:parseInt(Object(T.e)(s.token_info.get("decimals"))),shouldPreferSymbol:"true"===Object(T.e)(s.token_info.get("shouldPreferSymbol")),coinContractAddress:a,swapContract:t},oe(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r.wallet,t]);var le=Object(n.useCallback)((function(){if(P&&ie){var e="https://api.better-call.dev/v1/account/".concat(v.network,"/").concat(P,"/token_balances");fetch(e).then((function(e){return e.json()})).then((function(e){return e.balances.find((function(e){return e.contract===ie.coinContractAddress}))})).then((function(e){R(e?parseInt(e.balance)/Math.pow(10,e.decimals):0)}))}else R(-1)}),[R,P,ie]),de=Object(n.useCallback)(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=13;break}return e.prev=1,e.next=4,r.tz.getBalance(P);case 4:t=e.sent,E(t.toNumber()/Math.pow(10,6)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:e.next=14;break;case 13:E(-1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),[E,P,r.tz]);Object(n.useEffect)((function(){de(),le()}),[P,le,de]),Object(n.useEffect)((function(){-1!==M&&S.userTokenBalance(M,null===ie||void 0===ie?void 0:ie.symbol)}),[M,ie]),Object(n.useEffect)((function(){-1!==B&&S.userBalance(B)}),[B]),Object(n.useEffect)((function(){var e=setInterval((function(){de(),le()}),1e4);return function(){return clearInterval(e)}}),[de,le]);return Object(O.jsx)("div",{className:"card bg-primary-1",children:Object(O.jsx)("div",{className:"card-body",children:Object(O.jsxs)("div",{className:"form-block content-width-large align-center w-form",children:[Object(O.jsxs)("div",{className:"space-bottom",children:[Object(O.jsxs)("h3",{className:"heading no-space-bottom",children:["Buy $",null===ie||void 0===ie?void 0:ie.symbol]}),-1===M&&Object(O.jsx)("div",{id:"current-token",className:"large-text",children:"Connect your wallet to see your balance and trade"}),-1!==M&&Object(O.jsxs)("div",{id:"current-token",className:"large-text",children:["Your are currently holding ",Object(O.jsx)("span",{className:"inline-badge",children:M.toLocaleString(void 0,{maximumFractionDigits:0})})," $",null===ie||void 0===ie?void 0:ie.symbol]})]}),Object(O.jsx)("div",{className:"form-grid-vertical",children:Object(O.jsxs)("div",{className:"form-row form-row-last",children:[Object(O.jsxs)("div",{className:"w-layout-grid grid-4",children:[Object(O.jsx)(_,{contract:p,tokenDetails:ie,updateUserBalance:de,updateUserTokenBalance:le,Tezos:r,userAddress:P,userBalance:B,setStorage:V,storage:$}),!P&&Object(O.jsx)(g,{Tezos:r,setPublicToken:h,setWallet:N,setUserAddress:z,setBeaconConnection:Y,wallet:k}),P&&Object(O.jsx)(w,{wallet:k,setPublicToken:h,setUserAddress:z,setWallet:N,setTezos:s,setBeaconConnection:Y})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"accordion-group exception-buycvza",children:[Object(O.jsxs)("div",{className:"accordion-title-panel exception-buycerveza",onClick:function(){return ee(!J)},children:[Object(O.jsx)("h5",{className:"small-text",children:"Tokenomics"}),Object(O.jsx)("img",{alt:"",className:"accordion-arrow",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6091079111aa5ad8b31958a5_icon-chevron-right.svg",style:{transform:J?"rotateZ(90deg)":"rotateZ(0deg)",transformStyle:"preserve-3d",transition:"transform 200ms"}})]}),Object(O.jsx)("div",{className:"accordion-content",style:{display:J?"block":"none",opacity:1},children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"grid-halves full-width",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51bfc-856d06c6",children:"Contract"}),Object(O.jsx)("div",{className:"tiny-text",children:null===ie||void 0===ie?void 0:ie.coinContractAddress})]}),Object(O.jsxs)("div",{className:"grid-halves full-width",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51c01-856d06c6",children:"DEX LP Contract"}),Object(O.jsx)("div",{className:"tiny-text",children:null===ie||void 0===ie?void 0:ie.swapContract})]}),Object(O.jsxs)("div",{className:"grid-halves full-width",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51c06-856d06c6",children:"Total Supply"}),Object(O.jsx)("div",{className:"small-text",children:((null===ie||void 0===ie?void 0:ie.totalSupply)/Math.pow(10,null===ie||void 0===ie?void 0:ie.decimals)).toLocaleString()})]}),Object(O.jsxs)("div",{className:"grid-halves full-width",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51c0b-856d06c6",children:"Price per USD"}),Object(O.jsx)("div",{className:"price-per-usd",children:"N/A"})]}),Object(O.jsxs)("div",{className:"grid-halves full-width",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51c10-856d06c6",children:"Price per Tezos"}),Object(O.jsx)("div",{className:"price-per-tez",children:"N/A"})]}),Object(O.jsxs)("div",{className:"grid-halves full-width space-bottom",children:[Object(O.jsx)("div",{id:"w-node-_2bc1ab25-9a15-d706-5153-310495f51c15-856d06c6",children:"Price Change 24h"}),Object(O.jsx)("div",{className:"price-change-24h",children:"N/A"})]})]}),Object(O.jsx)("div",{className:"graph-wrapper",children:Object(O.jsx)("div",{className:"graph-svg",children:ie&&Object(O.jsx)(F,{swapContract:ie.swapContract,tokenDecimals:ie.decimals})})})]})})]}),Object(O.jsxs)("div",{className:"accordion-group exception-buycvza",children:[Object(O.jsxs)("div",{className:"accordion-title-panel exception-buycerveza",onClick:function(){return ce(!ne)},children:[Object(O.jsx)("h5",{className:"small-text",children:"Disclaimer"}),Object(O.jsx)("img",{alt:"",className:"accordion-arrow",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6091079111aa5ad8b31958a5_icon-chevron-right.svg",style:{transform:ne?"rotateZ(90deg)":"rotateZ(0deg)",transformStyle:"preserve-3d",transition:"transform 200ms"}})]}),Object(O.jsx)("div",{className:"accordion-content",style:{display:ne?"block":"none",opacity:1},children:Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:["The rates displayed by the calculator represent market exchange rates, and are provided for informational and estimation purposes only. They do not include any conversion fees or other charges applicable to a conversion or other transaction. The calculator is based on a third party service, the Company and its affiliates accept no responsibility for the contents or results of any calculations made using the calculator.",Object(O.jsx)("br",{})]})})})]})]})]})}),!1]})})})},A=a(25),U=a.n(A),B=function(e){var t=e.since,a=e.durationInSeconds,c=Object(n.useState)(0),r=Object(d.a)(c,2),s=(r[0],r[1]),i=Object(n.useRef)();return Object(n.useEffect)((function(){return i.current=setInterval((function(){return s((function(e){return e+1}))}),1e3),function(){i.current&&clearInterval(i.current)}}),[]),Object(O.jsx)(O.Fragment,{children:function(){var e=function(){var e=Math.floor(t.getTime()/1e3)+a-Math.floor(Date.now()/1e3);return e>0?e:0}(),n=Math.floor(e/60/60),c=Math.floor(e/60)%60,r=c<10?"0":"",s=e%60,i=s<10?"0":"";return"".concat(n,":").concat(r).concat(c,":").concat(i).concat(s)}()})},E=function(e){var t=e.penalty,a=e.personalLastUpdate,n="",c=t.periodSeconds.dividedBy(3600),r=c.dividedBy(24);return n=c.mod(24).isZero()?r.gt(1)?r.toFixed()+" days":r.toFixed()+" day":c.toFixed()+" hours",t.feePercentage.gt(0)?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"label",children:[null===t||void 0===t?void 0:t.feePercentage.toNumber(),"% fee for withdrawals within ",n,"."]}),a&&Object(O.jsxs)("div",{className:"small-text align-right",children:[Object(O.jsx)(B,{since:a,durationInSeconds:t.periodSeconds.toNumber()})," left"]})]}):Object(O.jsx)(O.Fragment,{})},I=function(e){var t=e.hideDepositModal,a=e.depositValue,n=e.setDepositValue,c=e.personalMaxDeposit,r=e.personalStake,s=e.deposit,i=e.depositing,o=e.symbol,l=e.penalty,d=e.personalLastUpdate,u=new U.a(a),b=u.isZero()||u>c||i;return Object(O.jsx)("div",{id:"modalWrapper",className:"modal-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:10},onClick:function(){return t()},children:Object(O.jsxs)("div",{className:"modal",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("h3",{children:"Deposit"}),Object(O.jsx)("span",{id:"killModal",className:"link-block-2 w-inline-block",style:{cursor:"pointer"},onClick:function(){return t()},children:Object(O.jsx)("img",{loading:"lazy",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/60a2b8ec3e22ca447f4b6063_nav-close-icon.svg"})}),Object(O.jsx)("div",{className:"form-block-2 w-form",children:Object(O.jsxs)("form",{onSubmit:function(e){s(),e.preventDefault()},children:[Object(O.jsxs)("div",{className:"div-block-11",children:[Object(O.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9,.]*",className:"form-farm w-input",name:"depositAmount","data-name":"depositAmount",placeholder:"0.00",id:"depositAmount-2",value:a,disabled:i,onChange:function(e){return function(e){var t=e.replaceAll(",",".");n(t)}(e.target.value)},style:{paddingRight:16}}),Object(O.jsxs)("div",{className:"div-block-18",children:[Object(O.jsx)("div",{children:"Pool Token"}),Object(O.jsx)("div",{id:"depositEstimateUsd",className:"small-text align-right",children:Object(O.jsxs)("span",{onClick:function(){return n(c.toString())},style:{cursor:"pointer"},children:["MAX (",c.toString(),")"]})})]}),Object(O.jsx)("div",{className:"div-block-17",children:Object(O.jsxs)("div",{className:"div-block-19",children:[Object(O.jsx)("div",{className:"farm-coin small coin-left",children:Object(O.jsx)("img",{loading:"lazy",id:"tokenImageInput",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/60911d04b9836a75b1dfa271_CVCA-COIN-ico-256.png"})}),Object(O.jsxs)("div",{className:"farm-coin small coin-right",children:[Object(O.jsx)("img",{loading:"lazy",id:"tokenImageOutput",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6092c5a84ac959603b28b19c_1_ZdaWerzN9F7oIyhZEwcRqQ%20(1).jpeg"}),Object(O.jsx)("div",{className:"label",children:"Pool Token"})]})]})})]}),Object(O.jsxs)("div",{className:"w-layout-grid farm-grid",children:[Object(O.jsx)("div",{id:"w-node-_711fc696-7ac7-e6c8-120c-6f532e8df7bf-8f74eee8",className:"label big",children:"You Staked"}),Object(O.jsxs)("div",{id:"TotalStaked",className:"small-text align-right big w-node-_26bb2413-c0d4-5c9f-4953-309a53061659-8f74eee8",children:[r.toNumber().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:6})," ",Object(O.jsxs)("span",{children:["$",o]})]}),l&&Object(O.jsx)(E,{penalty:l,personalLastUpdate:d})]}),Object(O.jsx)("input",{type:"submit",value:i?"Depositing...":"Deposit","data-wait":"Please wait...",id:"depositConfirm",disabled:b,className:"button bg-primary-4 full-width w-button"+(b?" disabled":"")})]})})]})})},L=function(e){var t=e.hideWithdrawModal,a=e.withdrawValue,n=e.setWithdrawValue,c=e.personalStake,r=e.withdraw,s=e.withdrawing,i=e.symbol,o=e.penalty,l=e.personalLastUpdate,d=new U.a(a),u=d.isZero()||d.gt(c)||s;return Object(O.jsx)("div",{id:"modalWrapper",className:"modal-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:10},onClick:function(){return t()},children:Object(O.jsxs)("div",{className:"modal",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("h3",{children:"Withdraw"}),Object(O.jsx)("span",{id:"killModal",className:"link-block-2 w-inline-block",style:{cursor:"pointer"},onClick:function(){return t()},children:Object(O.jsx)("img",{loading:"lazy",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/60a2b8ec3e22ca447f4b6063_nav-close-icon.svg"})}),Object(O.jsx)("div",{className:"form-block-2 w-form",children:Object(O.jsxs)("form",{onSubmit:function(e){r(),e.preventDefault()},children:[Object(O.jsxs)("div",{className:"div-block-11",children:[Object(O.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9,.]*",className:"form-farm w-input",name:"depositAmount","data-name":"depositAmount",placeholder:"0.00",id:"depositAmount-2",value:a,disabled:s,onChange:function(e){return function(e){var t=e.replaceAll(",",".");n(t)}(e.target.value)},style:{paddingRight:16}}),Object(O.jsxs)("div",{className:"div-block-18",children:[Object(O.jsx)("div",{children:"Pool Token"}),Object(O.jsx)("div",{id:"depositEstimateUsd",className:"small-text align-right",children:Object(O.jsxs)("span",{onClick:function(){return n(c.toString())},style:{cursor:"pointer"},children:["MAX (",c.toString(),")"]})})]}),Object(O.jsx)("div",{className:"div-block-17",children:Object(O.jsxs)("div",{className:"div-block-19",children:[Object(O.jsx)("div",{className:"farm-coin small coin-left",children:Object(O.jsx)("img",{loading:"lazy",id:"tokenImageInput",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/60911d04b9836a75b1dfa271_CVCA-COIN-ico-256.png"})}),Object(O.jsxs)("div",{className:"farm-coin small coin-right",children:[Object(O.jsx)("img",{loading:"lazy",id:"tokenImageOutput",alt:"",src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6092c5a84ac959603b28b19c_1_ZdaWerzN9F7oIyhZEwcRqQ%20(1).jpeg"}),Object(O.jsx)("div",{className:"label",children:"Pool Token"})]})]})})]}),Object(O.jsxs)("div",{className:"w-layout-grid farm-grid",children:[Object(O.jsx)("div",{id:"w-node-_711fc696-7ac7-e6c8-120c-6f532e8df7bf-8f74eee8",className:"label big",children:"You Staked"}),Object(O.jsxs)("div",{id:"TotalStaked",className:"small-text align-right big w-node-_26bb2413-c0d4-5c9f-4953-309a53061659-8f74eee8",children:[c.toNumber().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:6})," ",Object(O.jsxs)("span",{children:["$",i]})]}),o&&Object(O.jsx)(E,{penalty:o,personalLastUpdate:l})]}),Object(O.jsx)("input",{type:"submit",value:s?"Withdrawing...":"Withdraw","data-wait":"Please wait...",id:"depositConfirm",disabled:u,className:"button bg-primary-4 full-width w-button"+(u?" disabled":"")})]})})]})})};function M(e,t){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(o.a.mark((function e(t,a){var n,c,r,s,i,l,d,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.farm.plannedRewards.rewardPerBlock,30,c=new U.a(1051200),e.next=5,G(t);case 5:return r=e.sent,s=a.storage.token_pool,i=a.storage.total_supply,l=n.multipliedBy(c),d=r.multipliedBy(s).dividedBy(i),u=l.dividedBy(d).multipliedBy(100),console.debug({blockReward:n.toNumber(),blocksPerYear:c.toNumber(),totalStaked:r.toNumber(),swapTokenPool:s.toNumber(),swapTotalSupply:i.toNumber(),cvzaYearlyReward:l.toNumber(),cvzaStaked:d.toNumber(),APR:u.toNumber()}),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(o.a.mark((function e(t,a){var n,c,r,s,i,l,d,u,b,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.farm.lastBlockUpdate,e.next=3,t.rpc.getBlockHeader();case 3:return c=e.sent,r=c.level,s=new U.a(r).minus(n),i=s.multipliedBy(a.farm.plannedRewards.rewardPerBlock),l=a.farm.claimedRewards.paid.plus(a.farm.claimedRewards.unpaid),d=i.plus(l),u=a.farm.plannedRewards.rewardPerBlock.multipliedBy(a.farm.plannedRewards.totalBlocks),b=d.isGreaterThan(u),p=b?u.minus(l):i,e.abrupt("return",a.farm.accumulatedRewardPerShare.plus(p.multipliedBy(1e6).div(a.farmLpTokenBalance)));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(o.a.mark((function e(t,a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet.pkh();case 2:return n=e.sent,e.next=5,a.delegators.get(n);case 5:return(c=e.sent)&&(c.lastUpdate=new Date(c.lastUpdate)),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,a){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(o.a.mark((function e(t,a,n){var c,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.accumulatedRewardPerShareStart,e.next=3,W(t,a);case 3:return r=e.sent,s=r.minus(c),i=s.multipliedBy(n.lpTokenBalance.shiftedBy(-6)),console.debug({accRewardPerShareStart:c.toString(),accRewardPerShareEnd:r.toString(),accRewardPerShare:s.toString(),delegatorReward:i.toString(),lpTokenBalance:n.lpTokenBalance.toString()}),e.abrupt("return",i.isNaN()?new U.a(0):i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.farmLpTokenBalance);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.lpTokenBalance);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.ledger.get(a);case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n.balance);case 7:return e.abrupt("return",new U.a(0));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t,a){return te.apply(this,arguments)}function te(){return(te=Object(l.a)(o.a.mark((function e(t,a,n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet.pkh();case 2:return c=e.sent,e.next=5,n.storage.ledger.get(c).allowances;case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",ae(a,r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return t.includes(e.address)}function ne(e,t,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(l.a)(o.a.mark((function e(t,a,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet.pkh();case 2:return c=e.sent,e.abrupt("return",a.methods.update_operators([{add_operator:{owner:c,operator:n.address,token_id:0}}]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,a,n,c){return se.apply(this,arguments)}function se(){return(se=Object(l.a)(o.a.mark((function e(t,a,n,c,r){var s,i,l,d,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,n,c);case 2:if(s=e.sent,i=n.methods.deposit(r),s){e.next=18;break}return l=ne(t,a,n),e.t0=t.wallet.batch(),e.next=9,l;case 9:return e.t1=e.sent,e.next=12,e.t0.withContractCall.call(e.t0,e.t1).withContractCall(i).send();case 12:return d=e.sent,e.next=15,d.confirmation(1);case 15:return e.abrupt("return",d);case 18:return e.next=20,i.send();case 20:return u=e.sent,e.next=23,u.confirmation(1);case 23:return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.withdraw(a).send();case 2:return n=e.sent,e.next=5,n.confirmation(1);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.claim(u.b).send();case 2:return a=e.sent,e.next=5,a.confirmation(1);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue={startDate:new Date("01 Jul 2021 20:00:00 UTC"),endDate:new Date("01 Sep 2021 20:00:00 UTC"),totalStaked:void 0,APR:void 0,personalMaxDeposit:void 0,personalStake:void 0,personalUnclaimedReward:void 0,personalLastUpdate:void 0,fromSymbol:"CVZA-QP",fromDecimals:6,toSymbol:"CVZA",toDecimals:8},be=function(e){var t,a,c,r,s,i,b,p=e.farmContractAddress,m=e.swapContractAddress,f=e.startDate,j=e.endDate,h=Object(n.useState)(new u.a(v.rpcUrl)),x=Object(d.a)(h,2),y=x[0],k=x[1],N=Object(n.useState)(null),S=Object(d.a)(N,2),_=S[0],D=S[1],C=Object(n.useState)(""),P=Object(d.a)(C,2),F=P[0],T=P[1],z=Object(n.useState)(),A=Object(d.a)(z,2),B=A[0],E=A[1],R=Object(n.useState)(),W=Object(d.a)(R,2),Z=W[0],V=W[1],H=Object(n.useState)(),X=Object(d.a)(H,2),K=X[0],J=X[1],ee=Object(n.useState)(),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(ue),se=Object(d.a)(ce,2),oe=se[0],de=se[1],be=Object(n.useState)("0.00"),pe=Object(d.a)(be,2),me=pe[0],fe=pe[1],je=Object(n.useState)("0.00"),he=Object(d.a)(je,2),ve=he[0],xe=he[1],Oe=Object(n.useState)(!1),ge=Object(d.a)(Oe,2),we=ge[0],ye=ge[1],ke=Object(n.useState)(!1),Ne=Object(d.a)(ke,2),Se=Ne[0],_e=Ne[1],De=Object(n.useState)(!1),Ce=Object(d.a)(De,2),Pe=Ce[0],Fe=Ce[1],Te=Object(n.useState)(!1),ze=Object(d.a)(Te,2),Ae=(ze[0],ze[1],Object(n.useState)(!1)),Ue=Object(d.a)(Ae,2),Be=Ue[0],Ee=Ue[1],Ie=Object(n.useState)(!1),Le=Object(d.a)(Ie,2),Me=Le[0],Re=Le[1],We=function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet.at(a);case 2:n=e.sent,E(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet.at(a);case 2:n=e.sent,V(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$e=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage();case 2:a=e.sent,J(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage();case 2:a=e.sent,ne(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(l.a)(o.a.mark((function e(t,a,n,c){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return e.next=3,$(t,a);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:if(r=e.t0,!c){e.next=14;break}return e.next=11,Q(n,c);case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=new U.a(0);case 15:if(e.t2=e.t1,!r){e.next=22;break}return e.next=19,Y(r);case 19:e.t3=e.sent,e.next=23;break;case 22:e.t3=new U.a(0);case 23:if(e.t4=e.t3,!r){e.next=30;break}return e.next=27,q(t,a,r);case 27:e.t5=e.sent,e.next=31;break;case 30:e.t5=new U.a(0);case 31:return e.t6=e.t5,e.t7=null===r||void 0===r?void 0:r.lastUpdate,e.next=35,G(a);case 35:return e.t8=e.sent,e.next=38,M(a,n);case 38:e.t9=e.sent,s={personalMaxDeposit:e.t2,personalStake:e.t4,personalUnclaimedReward:e.t6,personalLastUpdate:e.t7,totalStaked:e.t8,APR:e.t9},de((function(e){return Object.assign({},e,s)}));case 41:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}();function He(){return(He=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new U.a(me).shiftedBy(oe.fromDecimals).decimalPlaces(0,U.a.ROUND_DOWN)).isZero()){e.next=3;break}return e.abrupt("return");case 3:return ye(!0),e.prev=4,e.next=7,re(y,B,Z,K,t);case 7:return Ee(!1),fe("0.00"),e.next=11,Ve(Z);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:ye(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}function Ge(){return(Ge=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),e.prev=1,e.next=4,le(Z);case 4:return e.next=6,Ve(Z);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:_e(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new U.a(ve).shiftedBy(oe.fromDecimals).decimalPlaces(0,U.a.ROUND_DOWN)).isZero()){e.next=3;break}return e.abrupt("return");case 3:return Fe(!0),e.prev=4,e.next=7,ie(Z,t);case 7:return Re(!1),xe("0.00"),e.next=11,Ve(Z);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:Fe(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){We(y,m)}),[y,m]),Object(n.useEffect)((function(){Ze(y,p)}),[y,p]),Object(n.useEffect)((function(){B&&$e(B)}),[B]),Object(n.useEffect)((function(){Z&&Ve(Z)}),[Z]),Object(n.useEffect)((function(){var e=setInterval((function(){Z&&Ve(Z)}),3e4);return function(){return clearInterval(e)}}),[Z]),Object(n.useEffect)((function(){y&&ae&&K&&qe(y,ae,K,F)}),[y,ae,K,F]),Object(n.useEffect)((function(){var e={startDate:new Date(f),endDate:new Date(j)};de((function(t){return Object.assign({},t,e)}))}),[f,j]),Object(O.jsx)("div",{className:"section bg-gray-1",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsxs)("div",{className:"farm",children:[Object(O.jsxs)("div",{className:"farm-title-wrapper",children:[Object(O.jsx)("div",{className:"farm-titel",children:Object(O.jsxs)("div",{className:"farm-titel-inlay",children:[Object(O.jsxs)("div",{style:{textAlign:"left"},children:[Object(O.jsx)("div",{children:"Total Staked"}),Object(O.jsxs)("div",{id:"totalStaked",className:"totalstaked",children:[null===(t=oe.totalStaked)||void 0===t?void 0:t.shiftedBy(-oe.fromDecimals).toNumber().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:oe.fromDecimals}),"\xa0$",oe.fromSymbol]})]}),Object(O.jsxs)("div",{className:"align-right",children:[Object(O.jsx)("div",{children:"Farming APR"}),Object(O.jsxs)("div",{id:"farmApy",className:"farmapy",children:[null===(a=oe.APR)||void 0===a?void 0:a.toFixed(2),"%"]})]}),Object(O.jsx)("div",{"data-w-id":"e799ee40-c2cf-545d-1c77-b15068d00b93","data-animation-type":"lottie","data-src":"https://uploads-ssl.webflow.com/611628d3fab35c8d64c4b6e6/611628d3fab35c01c8c4b8e1_lf30_editor_qdh1yqpy.json","data-loop":"1","data-direction":"1","data-autoplay":"1","data-is-ix2-target":"0","data-renderer":"svg","data-default-duration":"1.6","data-duration":"1.6",className:"lottie-animation-copy"})]})}),Object(O.jsxs)("div",{className:"farm-title-coins",children:[Object(O.jsx)("div",{className:"coin-top",children:Object(O.jsx)("div",{className:"farm-coin",children:Object(O.jsx)("img",{src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/60911d04b9836a75b1dfa271_CVCA-COIN-ico-256.png",loading:"lazy",id:"tokenImageInput",alt:""})})}),Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"farm-coin",children:Object(O.jsx)("img",{src:"https://uploads-ssl.webflow.com/6091079111aa5aff3f19582d/6092c5a84ac959603b28b19c_1_ZdaWerzN9F7oIyhZEwcRqQ%20(1).jpeg",loading:"lazy",id:"tokenImageOutput",alt:""})})})]})]}),Object(O.jsxs)("h5",{children:["Deposit \xa0",Object(O.jsxs)("span",{id:"tokenNameInput",className:"tokennameinput",children:["$",oe.fromSymbol]}),"\xa0 to earn \xa0",Object(O.jsxs)("span",{id:"tokenNameOutput",className:"tokennameoutput",children:["$",oe.toSymbol]})]}),Date.now()>oe.endDate.getTime()?Object(O.jsx)("div",{id:"ended",className:"text-pill-tiny red",children:Object(O.jsx)("div",{children:"Ended"})}):Date.now()>oe.startDate.getTime()?Object(O.jsx)("div",{id:"active",className:"text-pill-tiny green",children:Object(O.jsx)("div",{children:"Active"})}):Object(O.jsx)("div",{id:"active",className:"text-pill-tiny blue",children:Object(O.jsx)("div",{children:"In Preperation"})}),Object(O.jsxs)("div",{className:"w-layout-grid farm-grid",children:[Object(O.jsx)("div",{className:"label",children:"Start date"}),Object(O.jsx)("div",{id:"startDate",className:"farm-startdate",children:oe.startDate.toDateString()}),Object(O.jsx)("div",{className:"label",children:"End date"}),Object(O.jsx)("div",{id:"endDate",className:"farm-enddate",children:oe.endDate.toDateString()}),Object(O.jsxs)("div",{className:"label",children:["Your stake ",Object(O.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["($",oe.fromSymbol,")"]})]}),Object(O.jsx)("div",{id:"yourStake",className:"farm-yourstake",children:null===(c=oe.personalStake)||void 0===c?void 0:c.shiftedBy(-oe.fromDecimals).toNumber().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:oe.fromDecimals})}),Object(O.jsxs)("div",{className:"label",children:["Unclaimed reward ($",oe.toSymbol,")"]}),Object(O.jsx)("div",{id:"cvzaReward",className:"farm-cvzareward",children:null===(r=oe.personalUnclaimedReward)||void 0===r?void 0:r.shiftedBy(-oe.toDecimals).toNumber().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:oe.toDecimals})})]}),!F&&Object(O.jsx)("div",{className:"",children:Object(O.jsx)(g,{Tezos:y,setWallet:D,setUserAddress:T,wallet:_,showNano:!1})}),F&&Object(O.jsxs)("div",{className:"w-layout-grid",children:[Object(O.jsxs)("button",{id:"deposit",onClick:function(){return Ee(!0)},disabled:we||Pe||Se,className:"farm-buttons w-node-_58d63a0e-4a37-39e2-c3d7-2d81eefd4bbe-8f74eee8 w-inline-block"+(we||Pe||Se?"":" active"),children:[Object(O.jsx)("div",{className:"button-label-main",children:we?"Depositing...":"Deposit"}),Object(O.jsxs)("div",{className:"tiny-text _50",children:["Deposit",!(null===(s=oe.personalUnclaimedReward)||void 0===s?void 0:s.isZero())&&Object(O.jsx)(O.Fragment,{children:" and claim"})]})]}),Object(O.jsxs)("button",{id:"claim",onClick:function(){return function(){return Ge.apply(this,arguments)}()},disabled:we||Pe||Se||(null===(i=oe.personalUnclaimedReward)||void 0===i?void 0:i.isZero()),className:"farm-buttons w-node-_58d63a0e-4a37-39e2-c3d7-2d81eefd4bbe-8f74eee8 w-inline-block"+(!oe.personalUnclaimedReward||oe.personalUnclaimedReward.isZero()||we||Pe||Se?"":" active"),children:[Object(O.jsx)("div",{className:"button-label-main",children:Se?"Claiming...":"Claim"}),Object(O.jsxs)("div",{className:"tiny-text _50",children:[Object(O.jsxs)("span",{className:"tokennameoutput",children:["$",oe.toSymbol]})," reward"]})]}),Object(O.jsxs)("button",{id:"withdraw",onClick:function(){return Re(!0)},disabled:we||Pe||Se||(null===(b=oe.personalStake)||void 0===b?void 0:b.isZero()),className:"farm-buttons w-node-_58d63a0e-4a37-39e2-c3d7-2d81eefd4bbe-8f74eee8 w-inline-block "+(!oe.personalStake||oe.personalStake.isZero()||we||Pe||Se?"":"active"),children:[Object(O.jsx)("div",{className:"button-label-main",children:Pe?"Withdrawing...":"Withdraw"}),Object(O.jsx)("div",{className:"tiny-text _50",children:Object(O.jsx)("span",{className:"tokennameinput",children:"Withdraw and claim"})})]}),!1,Object(O.jsx)(w,{wallet:_,setUserAddress:T,setWallet:D,setTezos:k})]})]}),Be&&Object(O.jsx)(I,{hideDepositModal:function(){return Ee(!1)},depositValue:me,setDepositValue:fe,personalMaxDeposit:(oe.personalMaxDeposit||new U.a(0)).shiftedBy(-oe.fromDecimals),personalStake:(oe.personalStake||new U.a(0)).shiftedBy(-oe.fromDecimals),deposit:function(){return He.apply(this,arguments)},depositing:we,symbol:oe.fromSymbol,penalty:null===ae||void 0===ae?void 0:ae.farm.penalty,personalLastUpdate:oe.personalLastUpdate}),Me&&Object(O.jsx)(L,{hideWithdrawModal:function(){return Re(!1)},withdrawValue:ve,setWithdrawValue:xe,personalStake:(oe.personalStake||new U.a(0)).shiftedBy(-oe.fromDecimals),withdraw:function(){return Xe.apply(this,arguments)},withdrawing:Pe,symbol:oe.fromSymbol,penalty:null===ae||void 0===ae?void 0:ae.farm.penalty,personalLastUpdate:oe.personalLastUpdate})]})})})},pe=document.getElementById("root");pe&&(pe.dataset.swapContract?s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(z,{swapContract:pe.dataset.swapContract})}),pe):console.error("Please specify data-swap-contract for your buy form."));var me=document.getElementById("price-chart");if(me)if(me.dataset.swapContract){var fe=parseInt(me.dataset.tokenDecimals||"");s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(F,{swapContract:me.dataset.swapContract,tokenDecimals:fe||void 0})}),me)}else console.error("Please specify data-swap-contract for your price chart.");var je=document.getElementById("farm");je&&(je.dataset.swapContract?je.dataset.farmContract?je.dataset.startDate?je.dataset.endDate?s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(be,{farmContractAddress:je.dataset.farmContract,swapContractAddress:je.dataset.swapContract,startDate:je.dataset.startDate,endDate:je.dataset.endDate})}),je):console.error("Please specify data-end-date for your farm."):console.error("Please specify data-start-date for your farm."):console.error("Please specify data-farm-contract for your farm."):console.error("Please specify data-swap-contract for your farm."))}},[[379,1,2]]]);
//# sourceMappingURL=main.30b5e83c.chunk.js.map